<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Posts on Zhang Jian&#39;s Homepage</title>
    <link>/post/</link>
    <description>Recent content in Posts on Zhang Jian&#39;s Homepage</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh</language>
    <lastBuildDate>Sun, 22 Mar 2020 00:00:00 +0000</lastBuildDate>
    
	<atom:link href="/post/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>市场需求与预测之实战作业</title>
      <link>/post/2020/03/22/2020-03-22forecast/</link>
      <pubDate>Sun, 22 Mar 2020 00:00:00 +0000</pubDate>
      
      <guid>/post/2020/03/22/2020-03-22forecast/</guid>
      <description>项目评估与管理——市场预测小组练习题本次题目我们使用全球最大的数据建模和数据分析竞赛平台kaggle为资料来源。具体使用2017年kaggle发布的一个Hourse price比赛项目作为我们的训练项目。截止提交日期 5月22日按照小组进行，使用方法不限。评分以小组为单位，重点考察大家分析数据、数据可视化、报告撰写等能力。每小组最终报告中推荐两名成员作为主要贡献者，进行加分。最后祝大家学习顺利！</description>
    </item>
    
    <item>
      <title>Bond Valuation</title>
      <link>/post/2020/03/21/bond-valuation/</link>
      <pubDate>Sat, 21 Mar 2020 00:00:00 +0000</pubDate>
      
      <guid>/post/2020/03/21/bond-valuation/</guid>
      <description>债券估值基础假设债券的现金流如下：投资面值为100元，票面利率为5％，到期日为5年的债券。息票利率是您从持有债券中获得的利息，因此，在债券到期之前，每年将获得5美元的息票付款。到期时，您还将获得100的面值返还。计算每个现金流量的现值
计算债券的价值
假设我们给定该债券的到期收益率为6%
# 先调入包library(tidyverse)library(ggthemes) # ggplot2的主题包library(ggfortify)cf &amp;lt;- c(5,5,5,5,105)cf_df &amp;lt;- as_tibble(cf)## Warning: Calling `as_tibble()` on a vector is discouraged, because the behavior is likely to change in the future. Use `tibble::enframe(name = NULL)` instead.## This warning is displayed once per session.# 生成一个时间序列cf_df &amp;lt;- cf_df %&amp;gt;%mutate(year = as.numeric(rownames(cf_df))) %&amp;gt;%rename(cf = value)cf_df## # A tibble: 5 x 2## cf year## &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;## 1 5 1## 2 5 2## 3 5 3## 4 5 4## 5 105 5# 继续生成一个每一期的现金流的现值cf_df &amp;lt;- cf_df %&amp;gt;%mutate(pv = cf/(1+0.</description>
    </item>
    
    <item>
      <title>一些时间序列</title>
      <link>/post/2020/03/21/%E4%B8%80%E4%BA%9B%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97/</link>
      <pubDate>Sat, 21 Mar 2020 00:00:00 +0000</pubDate>
      
      <guid>/post/2020/03/21/%E4%B8%80%E4%BA%9B%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97/</guid>
      <description>一些直观的时间序列library(tidyverse)library(forecast)library(fpp2)library(ggfortify)library(ggthemes)autoplot(ausbeer,ts.colour = &amp;quot;blue&amp;quot;,main = &amp;quot;啤酒销量&amp;quot;,xlab = &amp;quot;时间&amp;quot;)+theme_clean()autoplot(AirPassengers,ts.colour = &amp;quot;red&amp;quot;,main=&amp;quot;乘客数量&amp;quot;,xlab = &amp;quot;时间&amp;quot;) +theme_clean()autoplot(melsyd[,&amp;quot;Economy.Class&amp;quot;]) +ggtitle(&amp;quot;墨尔本 - 悉尼经济舱乘客客流量&amp;quot;) +theme_clean() +xlab(&amp;quot;年份&amp;quot;) +ylab(&amp;quot;千&amp;quot;)+theme(text = element_text(family = &amp;quot;STHeiti&amp;quot;))+theme(plot.title = element_text(hjust = 0.5))中国股市开户数的一个趋势setwd(&amp;quot;C:/Users/jefee/Desktop&amp;quot;)data &amp;lt;- read_csv(&amp;#39;data2.csv&amp;#39;)pt&amp;lt;-ts(data$`信用账户新增开户投资者数:合计`,frequency=12,start=c(2011,1),end = c(2020,2))dec_data &amp;lt;- decompose(pt,type=&amp;#39;additive&amp;#39;)autoplot(dec_data) +theme_clean()时间序列的模式趋势季节性周期性autoplot(AirPassengers )+theme_clean()autoplot(arrivals, facets = TRUE)+theme_clean()autoplot(arrivals, facets = TRUE) +theme_clean() +geom_smooth() +labs(title =&amp;quot;到澳大利亚旅客人数&amp;quot;,y = &amp;quot;Arrivals (in thousands)&amp;quot;,x = NULL)## 季节性</description>
    </item>
    
    <item>
      <title>利率作业</title>
      <link>/post/2020/03/21/%E5%88%A9%E7%8E%87%E4%BD%9C%E4%B8%9A/</link>
      <pubDate>Sat, 21 Mar 2020 00:00:00 +0000</pubDate>
      
      <guid>/post/2020/03/21/%E5%88%A9%E7%8E%87%E4%BD%9C%E4%B8%9A/</guid>
      <description>介绍如果安装和调用包介绍如何计算NPV和IRR简单展示画图——非完美版1. R或python之所以强大是应为包多，包多干的事就多。安装和调用包非常简单，在Rstudio里直接使用右边的Packages对包进行管理，用鼠标就能完成。使用代码安装install.packages(‘包的名字’)，不过我还是建议在Rstudio里直接点击安装。我们先安装一个现代R里最重要的一个套包，安装前请同学们调整好自己tools菜单，option选项里安装镜像站点的位置。调用包也非常简单，直接使用library()加包的名字，每次运行脚本时都需要把重要的包调用，首当其冲的肯定是tidyverse包#install.packages(&amp;quot;tidyverse&amp;quot;)library(tidyverse)## -- Attaching packages ---------------------------------------------------- tidyverse 1.3.0 --## √ ggplot2 3.3.0 √ purrr 0.3.3## √ tibble 2.1.3 √ dplyr 0.8.5## √ tidyr 1.0.2 √ stringr 1.4.0## √ readr 1.3.1 √ forcats 0.5.0## -- Conflicts ------------------------------------------------------- tidyverse_conflicts() --## x dplyr::filter() masks stats::filter()## x dplyr::lag() masks stats::lag()接下来我们可以安装一个和我们接下来课程相关的金融包,代码前我加了一个“#”代表这条被注释了，大家可以用快捷键ctrl+shift+c进行注释或取消注释#install.</description>
    </item>
    
    <item>
      <title>投资学作业答案</title>
      <link>/post/2020/03/21/%E6%8A%95%E8%B5%84%E5%AD%A6%E4%BD%9C%E4%B8%9A%E7%AD%94%E6%A1%88/</link>
      <pubDate>Sat, 21 Mar 2020 00:00:00 +0000</pubDate>
      
      <guid>/post/2020/03/21/%E6%8A%95%E8%B5%84%E5%AD%A6%E4%BD%9C%E4%B8%9A%E7%AD%94%E6%A1%88/</guid>
      <description>小张打算给自己刚出生的孩子购买保险产品，该产品规定从0岁起投保人每年年初支付保险费6000元，共10次。从支付保险费的次年起，保险公司每2年年末返还一次收益，每次3000元。在孩子60岁时再一次性支付200000元养老费。请计算这笔保险的IRR，并给出自己的判断和理解#调用两个包library(tidyverse)library(jrvFinance)library(DT)# 建立一个dataframe，利用tidyverse进行数据清理cf &amp;lt;- tibble(period= 0:60,exp = 0)cf &amp;lt;- cf %&amp;gt;%mutate(exp = if_else(period %in% seq(0,9),-6000,0)) %&amp;gt;%mutate(income = if_else(period %in% seq(3,60,by = 2),3000,0))cf[61,&amp;quot;income&amp;quot;] &amp;lt;- 200000#35行，我是这么去给最后一期赋值的，如果同学们有更好的方法可以交流修改#展示一下现金流cf %&amp;gt;%mutate(pmt = exp+income) %&amp;gt;%datatable(rownames = F, caption = &amp;quot;该保险的现金流&amp;quot;,colnames = c(&amp;#39;年份&amp;#39;,&amp;#39;支出&amp;#39;,&amp;#39;收益&amp;#39;,&amp;#39;净收益&amp;#39;)){&#34;x&#34;:{&#34;filter&#34;:&#34;none&#34;,&#34;caption&#34;:&#34;该保险的现金流&#34;,&#34;data&#34;:[[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60],[-6000,-6000,-6000,-6000,-6000,-6000,-6000,-6000,-6000,-6000,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,3000,0,3000,0,3000,0,3000,0,3000,0,3000,0,3000,0,3000,0,3000,0,3000,0,3000,0,3000,0,3000,0,3000,0,3000,0,3000,0,3000,0,3000,0,3000,0,3000,0,3000,0,3000,0,3000,0,3000,0,3000,0,3000,0,3000,0,3000,0,3000,200000],[-6000,-6000,-6000,-3000,-6000,-3000,-6000,-3000,-6000,-3000,0,3000,0,3000,0,3000,0,3000,0,3000,0,3000,0,3000,0,3000,0,3000,0,3000,0,3000,0,3000,0,3000,0,3000,0,3000,0,3000,0,3000,0,3000,0,3000,0,3000,0,3000,0,3000,0,3000,0,3000,0,3000,200000]],&#34;container&#34;:&#34;\n \n \n 年份\n 支出\n 收益\n 净收益\n \n \n&#34;,&#34;options&#34;:{&#34;columnDefs&#34;:[{&#34;className&#34;:&#34;dt-right&#34;,&#34;targets&#34;:[0,1,2,3]}],&#34;order&#34;:[],&#34;autoWidth&#34;:false,&#34;orderClasses&#34;:false}},&#34;evals&#34;:[],&#34;jsHooks&#34;:[]}#计算净收益的irrirr &amp;lt;- cf %&amp;gt;% mutate(pmt = exp+income) %&amp;gt;%select(pmt) %&amp;gt;% pull() %&amp;gt;%irr()#利用jrv包进行计算，注意40行用了一个pull函数paste(&amp;quot;我们要计算的IRR是：&amp;quot;,irr)## [1] &amp;quot;我们要计算的IRR是： 0.</description>
    </item>
    
    <item>
      <title>时间序列分析1</title>
      <link>/post/2020/03/21/%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97%E5%88%86%E6%9E%901/</link>
      <pubDate>Sat, 21 Mar 2020 00:00:00 +0000</pubDate>
      
      <guid>/post/2020/03/21/%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97%E5%88%86%E6%9E%901/</guid>
      <description>时间序列最简单的预测方法均值法\[\hat{y}_{T+h | T}=\left(y_{1}+\cdots+y_{T}\right) / T\]
一个例子library(tidyverse)## -- Attaching packages ---------------------------------------------------- tidyverse 1.3.0 --## √ ggplot2 3.3.0 √ purrr 0.3.3## √ tibble 2.1.3 √ dplyr 0.8.5## √ tidyr 1.0.2 √ stringr 1.4.0## √ readr 1.3.1 √ forcats 0.5.0## -- Conflicts ------------------------------------------------------- tidyverse_conflicts() --## x dplyr::filter() masks stats::filter()## x dplyr::lag() masks stats::lag()library(forecast)## Registered S3 method overwritten by &amp;#39;quantmod&amp;#39;:## method from## as.</description>
    </item>
    
    <item>
      <title>练习题答案3</title>
      <link>/post/2020/03/21/%E7%BB%83%E4%B9%A0%E9%A2%98%E7%AD%94%E6%A1%883/</link>
      <pubDate>Sat, 21 Mar 2020 00:00:00 +0000</pubDate>
      
      <guid>/post/2020/03/21/%E7%BB%83%E4%B9%A0%E9%A2%98%E7%AD%94%E6%A1%883/</guid>
      <description>题目1：给定三种债券当前价格、未来现金流和到期收益率，求第四种债券价格。思路:通过已知的三个债券，计算即期利率s1，s2，s3，利用即期利率来求未知的第四只债券的价格\[925.53 = \frac{c_1}{1+s_1}+\frac{1000}{1+s_1}\]\[991.26 = \frac{c_2}{1+s_1}+\frac{c_2}{(1+s_2)^2}+\frac{1000}{(1+s_2)^2} \]\[1004.99 =\frac{c_3}{1+s_1}+ \frac{c_3}{(1+s_2)^2}+\frac{c_3}{(1+s_3)^3}+\frac{1000}{(1+s3)^3}\]
显然上面的\(c_1\),\(c_2\),\(c_3\)也是已知的，我们可以求解s1，s2，s3.
我就直给第一题的答案了，第二题和之前内容类似# 第一个函数进行票息分离get_zero_coupon&amp;lt;-function(coupons=c(0,90,100),BondPrices=c(925.53,991.26,1004.99),nominal_value=1000){price_matrix &amp;lt;- matrix(0,nrow=length(coupons),ncol=length(coupons))for(i in 1:length(coupons)){price_matrix[i,1:i] &amp;lt;- coupons[i]}diag(price_matrix) &amp;lt;- diag(price_matrix) + nominal_value #大家思考一下这一步在干什么zero_coupon_prices&amp;lt;-solve(price_matrix,BondPrices) #这一步是矩阵求解return(zero_coupon_prices)}# 另一个函数c&amp;lt;-get_zero_coupon()get_price &amp;lt;- function(c_r, t , s_p , f =1000) {cf = matrix(c(rep(f*c_r,t)),nr=1)cf[t] = cf[t]+freturn(cf%*%s_p)}#运用函数get_price(c_r = 0.11,t=3,s_p = c)## [,1]## [1,] 1030.113get_price(c_r = 0.</description>
    </item>
    
    <item>
      <title>聚类分析</title>
      <link>/post/2020/03/21/%E8%81%9A%E7%B1%BB%E5%88%86%E6%9E%90/</link>
      <pubDate>Sat, 21 Mar 2020 00:00:00 +0000</pubDate>
      
      <guid>/post/2020/03/21/%E8%81%9A%E7%B1%BB%E5%88%86%E6%9E%90/</guid>
      <description>什么是聚类？？一个简单的例子探索性数据分析（EDA）的一种形式,将样本通过特征划分成具有共同特征的有意义的族群。聚类分析的全部流程图流程
定义距离和相似性\[距离 = 1-相似性\]
距离的直观定义
\[距离=\sqrt{\left(\mathbf{X}_{\text {red }}-\mathbf{X}_{\text {blue }}\right)^{2}+\left(\mathbf{Y}_{\text {red }}-\mathbf{Y}_{\text {blue }}\right)^{2}}\]
library(tidyverse)library(ggthemes)library(ggfortify)library(DT)two_person &amp;lt;- tribble(~x, ~y,0,0,9,12)ggplot(two_person, aes(x = x, y = y)) + geom_point() +lims(x = c(-30,30), y = c(-20, 20)) + theme_clean()+ggtitle(&amp;quot;原始数据&amp;quot;)dist(two_person,method = &amp;quot;euclidean&amp;quot;)## 1## 2 15多余两个人时
three_p &amp;lt;- tribble(~x, ~y,0,0,9,12,-2,9)ggplot(three_p, aes(x = x, y = y)) + geom_point() +lims(x = c(-30,30), y = c(-20, 20)) + theme_clean()dist(three_p,method = &amp;quot;euclidean&amp;quot;)## 1 2## 2 15.</description>
    </item>
    
    <item>
      <title>利率练习2</title>
      <link>/post/2020/03/16/%E5%88%A9%E7%8E%87%E7%BB%83%E4%B9%A02/</link>
      <pubDate>Mon, 16 Mar 2020 00:00:00 +0000</pubDate>
      
      <guid>/post/2020/03/16/%E5%88%A9%E7%8E%87%E7%BB%83%E4%B9%A02/</guid>
      <description>题目背景你面临如下投资决策，现在支出70000万，投资期限为5年，每年的回报率为1万，现在的利率为5%，5年后投资结束，回收45000元，请问你是否应该参与这项投资？#首先加载包library(tidyverse)library(DT)#建立现金流cf &amp;lt;- tribble(~year, ~cf,0,-70000,1,10000,2,10000,3,10000,4,10000,5,55000)r &amp;lt;- 0.05cf %&amp;gt;%mutate(pv =cf/(1+r)^year) %&amp;gt;% datatable(rownames = F,caption = &amp;#39;这项投资的现金流表&amp;#39;,colnames = c(&amp;#39;年份&amp;#39;,&amp;#39;现金流&amp;#39;,&amp;#39;现值&amp;#39;)){&#34;x&#34;:{&#34;filter&#34;:&#34;none&#34;,&#34;caption&#34;:&#34;这项投资的现金流表&#34;,&#34;data&#34;:[[0,1,2,3,4,5],[-70000,10000,10000,10000,10000,55000],[-70000,9523.80952380952,9070.2947845805,8638.37598531476,8227.02474791882,43093.9391557652]],&#34;container&#34;:&#34;\n \n \n 年份\n 现金流\n 现值\n \n \n&#34;,&#34;options&#34;:{&#34;columnDefs&#34;:[{&#34;className&#34;:&#34;dt-right&#34;,&#34;targets&#34;:[0,1,2]}],&#34;order&#34;:[],&#34;autoWidth&#34;:false,&#34;orderClasses&#34;:false}},&#34;evals&#34;:[],&#34;jsHooks&#34;:[]}#计算npvnpv &amp;lt;- cf %&amp;gt;%mutate(pv =cf/(1+r)^year) %&amp;gt;% select(pv) %&amp;gt;%sum()if (npv&amp;gt;0){paste(&amp;quot;该项的npv为：&amp;quot;,npv,&amp;#39;,可行！&amp;#39;)}else {paste(&amp;quot;该项的npv为：&amp;quot;,npv,&amp;#39;,不可行！&amp;#39;)}## [1] &amp;quot;该项的npv为： 8553.44419738884 ,可行！&amp;quot;真实利率计算，名义利率为4%，计算半年计息，月度计息的真实利率,我们知道有一个公式\[(1+sr/n)^n=1+r\]</description>
    </item>
    
  </channel>
</rss>