<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>利率作业 | Zhang Jian&#39;s Homepage</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    
  </head>

  <body>
    <nav>
    <ul class="menu">
      
      <li><a href="/">首页</a></li>
      
      <li><a href="/cv/">CV</a></li>
      
      <li><a href="/categories/">分类</a></li>
      
      <li><a href="/tags/">Tags</a></li>
      
      <li><a href="/index.xml">订阅</a></li>
      
    </ul>
    <hr/>
    </nav>

<div class="article-meta">
<h1><span class="title">利率作业</span></h1>
<h2 class="author">张剑</h2>
<h2 class="date">2020/03/21</h2>
</div>

<main>



<div id="介绍如果安装和调用包" class="section level3">
<h3>介绍如果安装和调用包</h3>
</div>
<div id="介绍如何计算npv和irr" class="section level3">
<h3>介绍如何计算NPV和IRR</h3>
</div>
<div id="简单展示画图非完美版" class="section level3">
<h3>简单展示画图——非完美版</h3>
<div id="r或python之所以强大是应为包多包多干的事就多安装和调用包非常简单在rstudio里直接使用右边的packages对包进行管理用鼠标就能完成" class="section level4">
<h4>1. R或python之所以强大是应为包多，包多干的事就多。安装和调用包非常简单，在Rstudio里直接使用右边的Packages对包进行管理，用鼠标就能完成。</h4>
</div>
<div id="使用代码安装install.packages包的名字不过我还是建议在rstudio里直接点击安装" class="section level4">
<h4>使用代码安装install.packages(‘包的名字’)，不过我还是建议在Rstudio里直接点击安装。</h4>
</div>
<div id="我们先安装一个现代r里最重要的一个套包安装前请同学们调整好自己tools菜单option选项里安装镜像站点的位置" class="section level4">
<h4>我们先安装一个现代R里最重要的一个套包，安装前请同学们调整好自己tools菜单，option选项里安装镜像站点的位置。</h4>
</div>
<div id="调用包也非常简单直接使用library加包的名字每次运行脚本时都需要把重要的包调用首当其冲的肯定是tidyverse包" class="section level4">
<h4>调用包也非常简单，直接使用library()加包的名字，每次运行脚本时都需要把重要的包调用，首当其冲的肯定是tidyverse包</h4>
<pre class="r"><code>#install.packages(&quot;tidyverse&quot;)
library(tidyverse)</code></pre>
<pre><code>## -- Attaching packages ---------------------------------------------------- tidyverse 1.3.0 --</code></pre>
<pre><code>## √ ggplot2 3.3.0     √ purrr   0.3.3
## √ tibble  2.1.3     √ dplyr   0.8.5
## √ tidyr   1.0.2     √ stringr 1.4.0
## √ readr   1.3.1     √ forcats 0.5.0</code></pre>
<pre><code>## -- Conflicts ------------------------------------------------------- tidyverse_conflicts() --
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
</div>
</div>
<div id="接下来我们可以安装一个和我们接下来课程相关的金融包代码前我加了一个代表这条被注释了大家可以用快捷键ctrlshiftc进行注释或取消注释" class="section level3">
<h3>接下来我们可以安装一个和我们接下来课程相关的金融包,代码前我加了一个“#”代表这条被注释了，大家可以用快捷键ctrl+shift+c进行注释或取消注释</h3>
<pre class="r"><code>#install.packages(&quot;jrvFinance&quot;) 
library(jrvFinance)</code></pre>
</div>
<div id="接下来先给大家展示一下jrvfinance包的简单用法计算一系列现金流的pv计算一个5年的现金流贴现率为0.05现金流分别为100200400300200" class="section level3">
<h3>接下来先给大家展示一下jrvFinance包的简单用法,计算一系列现金流的PV，计算一个5年的现金流，贴现率为0.05，现金流分别为100,200,400，300,200</h3>
<pre class="r"><code>library(jrvFinance) #先调入包
# 我们现在只做最基本的演示，其他包可以不用调入
pv &lt;- npv(cf = c(100,200,400,300,200),rate =0.05,immediate.start=T ) ## 注意最后这个参数，上课是讲一下
paste(&#39;我们要计算的现值是:&#39;,pv)</code></pre>
<pre><code>## [1] &quot;我们要计算的现值是: 1076.97975637723&quot;</code></pre>
</div>
<div id="如果要计算irr也可以使用jrvfinance这个包同样假设一系列现金流0期支付200后续每年回报80持续4年问这一组现金流的irr是多少" class="section level3">
<h3>如果要计算IRR，也可以使用jrvFinance这个包，同样假设一系列现金流，0期支付200，后续每年回报80，持续4年，问这一组现金流的IRR是多少？</h3>
<pre class="r"><code>library(jrvFinance) #如果你前面一个框框里调入了jrvFinance，也没有必要再次调入了
irr &lt;- irr(cf=c(-200,80,80,80,80))
paste(&quot;我们要计算的IRR是：&quot;,irr)</code></pre>
<pre><code>## [1] &quot;我们要计算的IRR是： 0.218622696098342&quot;</code></pre>
<pre class="r"><code>#嗯，确实非常简单</code></pre>
</div>
<div id="如果不用包如何计算npv" class="section level3">
<h3>如果不用包，如何计算npv？</h3>
<div id="下面直接写一下按照公式很简单的也能得到我们将使用tribble函数建立一个dataframe数据框后面有机会和大家详细讲一下数据框和所谓的tidy-data这里的语法大家可能有点困惑不过熟悉以后就会觉得非常直观" class="section level4">
<h4>下面直接写一下，按照公式很简单的也能得到，我们将使用tribble函数建立一个DataFrame（数据框）后面有机会和大家详细讲一下数据框和所谓的tidy data。这里的语法大家可能有点困惑，不过熟悉以后就会觉得非常直观。</h4>
<pre class="r"><code>library(tidyverse)

# 我们使用tribble函数
cf &lt;- tribble(~Year,~cash_flow,
              1,100,
              2,300,
              3,200,
              4,1000)
cf</code></pre>
<pre><code>## # A tibble: 4 x 2
##    Year cash_flow
##   &lt;dbl&gt;     &lt;dbl&gt;
## 1     1       100
## 2     2       300
## 3     3       200
## 4     4      1000</code></pre>
<pre class="r"><code># 给定贴现率r=0.03
r &lt;- 0.03
npv &lt;- cf %&gt;%
  mutate(pv = cash_flow/(1+r)^Year) %&gt;%
  select(pv) %&gt;% sum()
paste(&quot;我们要求的npv是:&quot;,npv)</code></pre>
<pre><code>## [1] &quot;我们要求的npv是: 1451.38153116722&quot;</code></pre>
</div>
</div>

</main>

  <footer>
  <script src="//yihui.name/js/math-code.js"></script>
<script async src="//mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>

<script async src="//yihui.name/js/center-img.js"></script>

  
  <hr/>
  © <a href="https://jefeerzhang.github.io/">张剑</a>  2018 &ndash; 2020 | <a href="https://gitee.com/jefeerzhang">Gitee</a>
  
  </footer>
  </body>
</html>

